version: "2"

networks:
  intellect:
    driver: bridge

services:
  backend:
    container_name: "api_intellect"
    build:
      context: "../../backend"
    environment:
      PMA_HOST: mysqlintellect
    volumes:
      - "../../backend:/app"
    networks:
      - intellect
    depends_on:
      - mysqlintellect
    ports:
      - "4333:4333"

  frontend:
    container_name: "frontend"
    build:
      context: "../../frontend"
    environment:
      - HOST=0.0.0.0
    working_dir: /app
    volumes:
      - "../../frontend:/app"
    networks:
      - intellect
    ports:
      - "8080:8080"

  mysqlintellect:
    container_name: mysqlintellect
    build:
      context: ../../database
    ports:
      - 3306:3306
    environment:
      MYSQL_DATABASE: intellect
      MYSQL_USER: intellect
      MYSQL_ROOT_PASSWORD: intellect
      MYSQL_PASSWORD: intellect
      SERVICE_NAME: mysql
    volumes:
      - ../../database/mysql:/var/lib/mysql
    networks:
      - intellect

  phpmyadmin_intellect:
    container_name: "phpmyadmin_intellect"
    image: phpmyadmin/phpmyadmin:latest
    environment:
      PMA_HOST: mysqlintellect
    depends_on:
      - mysqlintellect
    ports:
      - 2050:80
    networks:
      - intellect
